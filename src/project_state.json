{
  "schemaVersion": "1.0.0",
  "projectStateVersion": 262,
  "summary": "One Promise is a minimal, calming self-reflection PWA where users set one daily promise, reflect with a simple thumbs up/down, enter rest mode until 06:00, and review weekly/history; light cream/off-white monochrome styling with hand-sketched assets and subtle fade/slide animations. Project is under a hard deadline: Caffeine Promptathon submission is today, so remaining fixes (notably mobile notification permission prompt reliability) must be completed without introducing any UI/design regressions.",
  "existing_features": [
    {
      "id": "IF-1",
      "title": "Light monochrome UI theme (light-mode only)",
      "synonyms": [
        "UI styling requirement",
        "avoid AI purple"
      ],
      "description": "Implemented light-only, calming monochrome styling consistent with the spec (no purple scheme).",
      "reqIds": [
        "AR-1"
      ],
      "version": 1
    },
    {
      "id": "IF-2",
      "title": "Onboarding flow with optional 3-screen Learn More carousel",
      "synonyms": [
        "splash",
        "Learn More carousel"
      ],
      "description": "Onboarding screen(s) implemented with carousel-based learn-more flow and transitions per spec.",
      "reqIds": [
        "AR-2"
      ],
      "version": 1
    },
    {
      "id": "IF-3",
      "title": "Today screen promise flow (create + reflect)",
      "synonyms": [
        "promise creation",
        "thumbs up/down reflection"
      ],
      "description": "Today screen implemented with promise creation state and active state that shows the promise and allows thumbs up/down reflection.",
      "reqIds": [
        "AR-3"
      ],
      "version": 1
    },
    {
      "id": "IF-4",
      "title": "Rest Mode after reflection with lock until 06:00",
      "synonyms": [
        "quiet state",
        "rest mode persistence"
      ],
      "description": "After reflecting, the app enters a rest/quiet mode and remains locked until the next 06:00 boundary.",
      "reqIds": [
        "AR-4"
      ],
      "version": 1
    },
    {
      "id": "IF-5",
      "title": "Local-first data storage client (offline-capable)",
      "synonyms": [
        "PWA local-first storage",
        "offline storage"
      ],
      "description": "Implemented a storage client to persist promises/reflections locally (offline-capable).",
      "reqIds": [
        "AR-6"
      ],
      "version": 1
    },
    {
      "id": "IF-6",
      "title": "Temporary testing shortcut: tapping TODAY re-opens onboarding",
      "synonyms": [
        "Promptathon testing shortcut"
      ],
      "description": "Implemented the temporary testing shortcut where tapping the TODAY title returns to onboarding to allow setting a new promise without waiting for the next day.",
      "reqIds": [
        "AR-9"
      ],
      "version": 1
    },
    {
      "id": "IF-7",
      "title": "Internet Identity auth + backend canister actor integration (ICP template scaffolding)",
      "synonyms": [
        "Internet Identity login",
        "useActor hook",
        "Motoko backend integration"
      ],
      "description": "Project now includes Internet Identity authentication hooks and backend canister actor wiring (Motoko backend + frontend actor/useInternetIdentity/useActor) as part of the ICP app template/infrastructure.",
      "reqIds": [],
      "version": 1
    },
    {
      "id": "IF-8",
      "title": "History/Journal: weekly summary + full history list with journal access from Today",
      "synonyms": [
        "History screen",
        "Journal panel",
        "weekly summary Mon–Sun"
      ],
      "description": "Implemented journal/history UI accessible from the Today screen, including a weekly summary (calendar week Mon–Sun) and a full vertical history list showing date, promise text, and outcome (dash for unreflected days).",
      "reqIds": [
        "AR-5"
      ],
      "version": 1
    },
    {
      "id": "IF-9",
      "title": "Notifications: 08:30 daily + conditional 20:00 reflection reminder with deep-link",
      "synonyms": [
        "reminders",
        "local notification scheduling"
      ],
      "description": "Implemented notification scheduling: 08:30 daily reminder to set a promise; 20:00 reminder only when a promise exists; notification tap deep-links to the Today/promise screen.",
      "reqIds": [
        "AR-7"
      ],
      "version": 1
    },
    {
      "id": "IF-10",
      "title": "GA4 analytics instrumentation for 4 events",
      "synonyms": [
        "analytics",
        "event tracking"
      ],
      "description": "Integrated GA4 event tracking limited to: promise_created, reflection_yes, reflection_no, history_viewed (anonymous-only).",
      "reqIds": [
        "AR-8"
      ],
      "version": 1
    },
    {
      "id": "IF-12",
      "title": "shadcn/ui component library scaffolded in frontend",
      "synonyms": [
        "shadcn ui integration",
        "UI component primitives"
      ],
      "description": "Frontend now includes the shadcn/ui component scaffold (accordion, dialog, sheet, sidebar, etc.) and related Tailwind/Vite config updates to support consistent UI primitives across the app.",
      "reqIds": [],
      "version": 1
    },
    {
      "id": "IF-16",
      "title": "Thumb icons rebuilt from user-pasted SVG markup (fixed #2C2C2C) and used across Today + History",
      "synonyms": [
        "thumb-up inline SVG fix",
        "thumb-down inline SVG fix",
        "embed pasted SVG",
        "fixed fill color"
      ],
      "description": "Updated both inline SVG React components (ThumbsUpIcon + ThumbsDownIcon) to embed the exact user-pasted SVG markup and render with a fixed fill color #2C2C2C (not currentColor). Today and History/Journal render thumbs via these components (not <img>), ensuring the intended thumb designs display reliably and bypassing static-asset/service-worker caching issues.",
      "reqIds": [],
      "version": 1
    },
    {
      "id": "IF-17",
      "title": "Create Promise screen layout tweak (textbox up, button down, larger typed text)",
      "synonyms": [
        "promise creation layout adjustment",
        "textarea spacing tweak"
      ],
      "description": "Adjusted Create Promise screen layout: moved promise textbox up ~25px, moved the “Make Promise” button down ~15px to increase spacing, and set typed text font-size to 1.5rem (placeholder unchanged).",
      "reqIds": [
        "AR-42"
      ],
      "version": 1
    },
    {
      "id": "IF-18",
      "title": "Onboarding carousel auto-advance (Slide 1 landing; 5s to Slide 2; 5s to Slide 3; horizontal slide transition)",
      "synonyms": [
        "onboarding timed slideshow",
        "useOnboardingAutoAdvance"
      ],
      "description": "Onboarding carousel now starts on Slide 1 as the landing screen and auto-advances to Slide 2 after 5 seconds and Slide 3 after another 5 seconds, using a horizontal slide transition; flow stops on Slide 3 while still allowing manual navigation.",
      "reqIds": [
        "AR-43"
      ],
      "version": 1
    },
    {
      "id": "IF-19",
      "title": "Logout returns user to landing screen (not onboarding/learn-more carousel)",
      "synonyms": [
        "logout navigation fix"
      ],
      "description": "Logging out now navigates the user back to the current landing screen rather than entering the onboarding/learn-more carousel.",
      "reqIds": [
        "AR-44"
      ],
      "version": 1
    },
    {
      "id": "IF-20",
      "title": "Initial app entry routes directly to Onboarding Slide 1 (no landing flash); logout routes to landing only",
      "synonyms": [
        "initial navigation fix",
        "onboarding as index route",
        "logout to landing"
      ],
      "description": "Updated routing/entry logic so first launch (and direct URL entry) lands on the Onboarding carousel Slide 1 without briefly showing the original landing screen; the original landing screen is used only after logout.",
      "reqIds": [
        "AR-46"
      ],
      "version": 1
    },
    {
      "id": "IF-21",
      "title": "Onboarding auto-advance reliably progresses Slide 1 -> 2 -> 3 (5s intervals) and stops on Slide 3",
      "synonyms": [
        "onboarding timed slideshow fix",
        "auto-advance slide 3"
      ],
      "description": "Fixed the onboarding/Learn More carousel timed progression so it does not stop on Slide 2; it advances to Slide 3 after the second 5-second interval (timed from Slide 2 activation) using horizontal slide transitions, while still allowing manual navigation.",
      "reqIds": [
        "AR-45"
      ],
      "version": 1
    },
    {
      "id": "IF-22",
      "title": "Today header uses burger/menu icon to open slide-out history panel (no header logout icon)",
      "synonyms": [
        "header icons cleanup",
        "burger/menu icon",
        "remove logout icon"
      ],
      "description": "Updated the Today screen header to show a simple burger/menu icon that opens the slide-out History/Journal panel, and removed the separate logout icon from the header (logout remains inside the panel).",
      "reqIds": [
        "AR-47"
      ],
      "version": 1
    },
    {
      "id": "IF-23",
      "title": "Reset for testing action restored in slide-out history panel",
      "synonyms": [
        "testing shortcut reset",
        "panel reset action"
      ],
      "description": "Restored the previously available “Reset for testing” action inside the slide-out History/Journal panel with the same behavior and placement as before the regression.",
      "reqIds": [
        "AR-48"
      ],
      "version": 1
    },
    {
      "id": "IF-24",
      "title": "PWA notification permission prompt diagnosis report (iOS/Android/desktop)",
      "synonyms": [
        "notification permission diagnosis",
        "mobile PWA notifications report",
        "AR-50"
      ],
      "description": "Added a code-level diagnosis document at `frontend/diagnostics/pwa-notification-permission-diagnosis.md` analyzing why the mobile PWA notification permission prompt is not firing (and app not appearing in OS notification settings), covering iOS PWA and considering applicability to Android PWAs and desktop browsers. No behavioral code changes implied—diagnosis-only artifact for review.",
      "reqIds": [],
      "version": 1
    },
    {
      "id": "IF-25",
      "title": "Notification permission request flow (one-time prompt + support checks) wired from Today screen",
      "synonyms": [
        "mobile PWA notification permission prompt fix",
        "notificationPermissionRequested flag",
        "AR-49"
      ],
      "description": "Implemented an explicit notification permission request utility that checks support + Notification.permission, requests permission only when state is \"default\", and persists a one-time localStorage flag to avoid re-prompting across sessions. Wired the permission request from the Today/promise screen so it reliably triggers the OS prompt on supported platforms; notification scheduling is decoupled and runs only after permission is granted.",
      "reqIds": [
        "AR-49"
      ],
      "version": 1
    }
  ],
  "new_feature_requests": [
    {
      "id": "AR-10",
      "summary": "Resolve broken thumb icons by aligning deployed file locations with the paths referenced in code (move images to expected public paths or update references) so thumbs render on Today + History",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-11",
      "summary": "Fix broken onboarding slide images (zen-stones/sun/moon) by aligning deployed asset locations with the public paths referenced by the UI and ensuring service worker/precache is not serving stale/missing slide asset URLs",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-12",
      "summary": "Permanently fix broken static assets by moving thumbs + onboarding slide images to canonical public-root paths (/thumbs-up.png, /thumbs-down.png, /zen-stones.png, /sun.png, /moon.png), updating all references, and disabling service-worker image precaching to prevent stale/missing asset URLs",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-13",
      "summary": "Create canonical, stable public-root image files for thumbs and onboarding slides: ensure these files exist at build/deploy time under `frontend/public/` as exact paths: `/thumbs-up.png`, `/thumbs-down.png`, `/zen-stones.png`, `/sun.png`, `/moon.png`. Source these files by copying/renaming from existing generated assets where applicable: `frontend/public/assets/generated/thumbs-up.dim_128x128.png` -> `frontend/public/thumbs-up.png`, `frontend/public/assets/generated/thumbs-down.dim_128x128.png` -> `frontend/public/thumbs-down.png`, `frontend/public/assets/generated/zen-stones.dim_1200x800.png` -> `frontend/public/zen-stones.png`, `frontend/public/assets/generated/full-sun.dim_1200x800.png` -> `frontend/public/sun.png`, `frontend/public/assets/generated/crescent-moon.dim_1200x800.png` -> `frontend/public/moon.png`.",
      "reqIds": [
        "REQ-1"
      ],
      "status": "pending"
    },
    {
      "id": "AR-14",
      "summary": "Update all React code references for reflection/thumb icons to use only the canonical public-root paths, with no remaining runtime references to `/assets/generated/thumbs-*.dim_128x128.png`. Specifically update `frontend/src/utils/outcomeMapping.ts` `getOutcomeIconPath()` to return `/thumbs-up.png` for positive and `/thumbs-down.png` for negative.",
      "reqIds": [
        "REQ-2"
      ],
      "status": "pending"
    },
    {
      "id": "AR-15",
      "summary": "Update onboarding carousel slide image paths to use only the canonical public-root paths `/zen-stones.png`, `/sun.png`, and `/moon.png` (not `/assets/*` and not `/assets/generated/*`). This includes updating the `carouselSlides` configuration in `frontend/src/pages/Onboarding.tsx`.",
      "reqIds": [
        "REQ-3"
      ],
      "status": "pending"
    },
    {
      "id": "AR-16",
      "summary": "Remove/ignore prior `assets/generated/*` image URL usage for thumbs and onboarding slides across the frontend by auditing and updating any remaining hardcoded references so that thumbs and slides never depend on `assets/generated` paths at runtime.",
      "reqIds": [
        "REQ-4"
      ],
      "status": "pending"
    },
    {
      "id": "AR-17",
      "summary": "Update Internet Computer asset caching rules in `frontend/public/.ic-assets.json5` so that the new canonical public-root images (`thumbs-up.png`, `thumbs-down.png`, `zen-stones.png`, `sun.png`, `moon.png`) are not cached (set Cache-Control to no-cache/no-store and max_age 0). Keep other asset caching behavior unchanged unless required to prevent stale image URLs from being served.",
      "reqIds": [
        "REQ-5"
      ],
      "status": "pending"
    },
    {
      "id": "AR-18",
      "summary": "Create canonical, stable image files at the public root under `frontend/public/` so they are available at runtime exactly at these paths: `/thumbs-up.png`, `/thumbs-down.png`, `/zen-stones.png`, `/sun.png`, `/moon.png`. Source these by copying/renaming from the existing generated assets where applicable: `frontend/public/assets/generated/thumbs-up.dim_128x128.png` -> `frontend/public/thumbs-up.png`, `frontend/public/assets/generated/thumbs-down.dim_128x128.png` -> `frontend/public/thumbs-down.png`, `frontend/public/assets/generated/zen-stones.dim_1200x800.png` -> `frontend/public/zen-stones.png`, `frontend/public/assets/generated/full-sun.dim_1200x800.png` -> `frontend/public/sun.png`, `frontend/public/assets/generated/crescent-moon.dim_1200x800.png` -> `frontend/public/moon.png`.",
      "reqIds": [
        "REQ-6"
      ],
      "status": "pending"
    },
    {
      "id": "AR-19",
      "summary": "Update all thumb icon URL usage across the frontend to use only the canonical public-root paths. Specifically, change `frontend/src/utils/outcomeMapping.ts` `getOutcomeIconPath()` to return `/thumbs-up.png` for `positive` and `/thumbs-down.png` for `negative`, and audit the codebase to ensure there are no remaining references to `/assets/generated/thumbs-*.dim_128x128.png`.",
      "reqIds": [
        "REQ-7"
      ],
      "status": "pending"
    },
    {
      "id": "AR-20",
      "summary": "Update onboarding carousel slide image paths to use only canonical public-root paths by editing `frontend/src/pages/Onboarding.tsx` so the slide images reference `/zen-stones.png`, `/sun.png`, and `/moon.png` (not `/assets/*` and not `/assets/generated/*`). Audit for any other onboarding slide image references and align them to these same canonical paths.",
      "reqIds": [
        "REQ-8"
      ],
      "status": "pending"
    },
    {
      "id": "AR-21",
      "summary": "Update Internet Computer asset caching rules in `frontend/public/.ic-assets.json5` so that the new canonical public-root images (`thumbs-up.png`, `thumbs-down.png`, `zen-stones.png`, `sun.png`, `moon.png`) are not cached (set Cache-Control to no-cache/no-store/must-revalidate and max_age 0). Keep other asset caching behavior unchanged unless required to prevent stale image URLs from being served.",
      "reqIds": [
        "REQ-9"
      ],
      "status": "pending"
    },
    {
      "id": "AR-22",
      "summary": "Ensure the app does not precache or otherwise aggressively cache the thumb and onboarding slide images via any service worker or precache manifest used by the frontend build. If a service worker is present in the project, update its precache configuration so these images are excluded; otherwise, ensure the combination of asset rules and build output does not generate a precache entry for these canonical image files.",
      "reqIds": [
        "REQ-10"
      ],
      "status": "pending"
    },
    {
      "id": "AR-23",
      "summary": "Create canonical, stable image files at the public root so they are available at runtime exactly at these paths: `/thumbs-up.png`, `/thumbs-down.png`, `/zen-stones.png`, `/sun.png`, `/moon.png`. Source them by copying/renaming from existing generated assets where applicable: `frontend/public/assets/generated/thumbs-up.dim_128x128.png` -> `frontend/public/thumbs-up.png`, `frontend/public/assets/generated/thumbs-down.dim_128x128.png` -> `frontend/public/thumbs-down.png`, `frontend/public/assets/generated/zen-stones.dim_1200x800.png` -> `frontend/public/zen-stones.png`, `frontend/public/assets/generated/full-sun.dim_1200x800.png` -> `frontend/public/sun.png`, `frontend/public/assets/generated/crescent-moon.dim_1200x800.png` -> `frontend/public/moon.png`.",
      "reqIds": [
        "REQ-11"
      ],
      "status": "pending"
    },
    {
      "id": "AR-24",
      "summary": "Update all thumb icon URL usage across the frontend to use only the canonical public-root paths. Specifically, update `frontend/src/utils/outcomeMapping.ts` `getOutcomeIconPath()` to return `/thumbs-up.png` for `positive` and `/thumbs-down.png` for `negative`, and ensure all usages (e.g., Today + History) resolve via this function and load correctly.",
      "reqIds": [
        "REQ-12"
      ],
      "status": "pending"
    },
    {
      "id": "AR-25",
      "summary": "Update onboarding carousel slide image paths to use only the canonical public-root paths by editing `frontend/src/pages/Onboarding.tsx` so `carouselSlides` images reference `/zen-stones.png`, `/sun.png`, and `/moon.png` (not `/assets/*` and not `/assets/generated/*`).",
      "reqIds": [
        "REQ-13"
      ],
      "status": "pending"
    },
    {
      "id": "AR-26",
      "summary": "Audit and remove/replace any remaining runtime references to `assets/generated/*` for thumbs and onboarding slides across the frontend so that thumbs and onboarding slide images never depend on `assets/generated` paths at runtime.",
      "reqIds": [
        "REQ-14"
      ],
      "status": "pending"
    },
    {
      "id": "AR-27",
      "summary": "Update Internet Computer asset caching rules in `frontend/public/.ic-assets.json5` so that the new canonical public-root images (`thumbs-up.png`, `thumbs-down.png`, `zen-stones.png`, `sun.png`, `moon.png`) are not cached (set Cache-Control to `no-cache, no-store, must-revalidate` and `max_age` to 0). Keep other asset caching behavior unchanged unless required to prevent stale image URLs from being served.",
      "reqIds": [
        "REQ-15"
      ],
      "status": "pending"
    },
    {
      "id": "AR-28",
      "summary": "Ensure the app does not precache or otherwise aggressively cache the thumb and onboarding slide images via any service worker or precache manifest used by the frontend build. If a service worker is present in the project, update its precache configuration so these images are excluded; otherwise, ensure the combination of asset rules and build output does not generate a precache entry for these canonical image files.",
      "reqIds": [
        "REQ-16"
      ],
      "status": "pending"
    },
    {
      "id": "AR-29",
      "summary": "Create canonical, stable public-root image files under `frontend/public/` with these exact runtime paths: `/thumbs-up.png`, `/thumbs-down.png`, `/zen-stones.png`, `/sun.png`, `/moon.png`. Source them by copying/renaming existing generated assets: `frontend/public/assets/generated/thumbs-up.dim_128x128.png` -> `frontend/public/thumbs-up.png`, `frontend/public/assets/generated/thumbs-down.dim_128x128.png` -> `frontend/public/thumbs-down.png`, `frontend/public/assets/generated/zen-stones.dim_1200x800.png` -> `frontend/public/zen-stones.png`, `frontend/public/assets/generated/full-sun.dim_1200x800.png` -> `frontend/public/sun.png`, `frontend/public/assets/generated/crescent-moon.dim_1200x800.png` -> `frontend/public/moon.png`.",
      "reqIds": [
        "REQ-17"
      ],
      "status": "pending"
    },
    {
      "id": "AR-30",
      "summary": "Update `frontend/src/utils/outcomeMapping.ts` so `getOutcomeIconPath()` returns only the canonical public-root paths: `/thumbs-up.png` for `positive` and `/thumbs-down.png` for `negative` (no `/assets/generated/*` paths).",
      "reqIds": [
        "REQ-18"
      ],
      "status": "pending"
    },
    {
      "id": "AR-31",
      "summary": "Update `frontend/src/pages/Onboarding.tsx` `carouselSlides` image paths to use only the canonical public-root paths `/zen-stones.png`, `/sun.png`, and `/moon.png` (no `/assets/*` and no `/assets/generated/*`).",
      "reqIds": [
        "REQ-19"
      ],
      "status": "pending"
    },
    {
      "id": "AR-32",
      "summary": "Audit the frontend codebase and remove/replace any remaining runtime references to `assets/generated/*` or `/assets/*` for thumb icons and onboarding slide images so these UI elements only depend on the canonical public-root paths (`/thumbs-up.png`, `/thumbs-down.png`, `/zen-stones.png`, `/sun.png`, `/moon.png`).",
      "reqIds": [
        "REQ-20"
      ],
      "status": "pending"
    },
    {
      "id": "AR-33",
      "summary": "Update `frontend/public/.ic-assets.json5` to add explicit no-cache rules (Cache-Control `no-cache, no-store, must-revalidate` and `max_age: 0`) for the new canonical public-root images: `thumbs-up.png`, `thumbs-down.png`, `zen-stones.png`, `sun.png`, `moon.png`. Keep all other caching behavior unchanged unless required to prevent stale image URLs from being served.",
      "reqIds": [
        "REQ-21"
      ],
      "status": "pending"
    },
    {
      "id": "AR-34",
      "summary": "Ensure the app does not precache or otherwise aggressively cache the thumb and onboarding slide images via any service worker or precache manifest produced by the frontend build; exclude `/thumbs-up.png`, `/thumbs-down.png`, `/zen-stones.png`, `/sun.png`, `/moon.png` from precache if a service worker/precache configuration exists.",
      "reqIds": [
        "REQ-22"
      ],
      "status": "pending"
    },
    {
      "id": "AR-35",
      "summary": "Update the frontend thumb icon path source of truth so the app no longer references missing thumb image URLs, and ensure thumbs render correctly on both the Today screen and the History/Journal panel.",
      "reqIds": [
        "REQ-23"
      ],
      "status": "pending"
    },
    {
      "id": "AR-36",
      "summary": "Change `frontend/src/utils/outcomeMapping.ts` `getOutcomeIconPath()` to return the canonical public-root thumb image paths `/thumbs-up.png` (positive) and `/thumbs-down.png` (negative), replacing the current `/assets/generated/thumbs-*.dim_128x128.png` paths.",
      "reqIds": [
        "REQ-24"
      ],
      "status": "pending"
    },
    {
      "id": "AR-37",
      "summary": "Ensure the canonical thumb image files exist at build/deploy time under `frontend/public/` with exact filenames `thumbs-up.png` and `thumbs-down.png`. Source them by copying/renaming from the existing generated assets: `frontend/public/assets/generated/thumbs-up.dim_128x128.png` -> `frontend/public/thumbs-up.png` and `frontend/public/assets/generated/thumbs-down.dim_128x128.png` -> `frontend/public/thumbs-down.png`.",
      "reqIds": [
        "REQ-25"
      ],
      "status": "pending"
    },
    {
      "id": "AR-38",
      "summary": "Update `frontend/public/.ic-assets.json5` to add explicit no-cache rules for the canonical public-root thumb files `thumbs-up.png` and `thumbs-down.png` (Cache-Control `no-cache, no-store, must-revalidate` and `max_age: 0`) to prevent stale thumbs from being served. Keep all other caching behavior unchanged.",
      "reqIds": [
        "REQ-26"
      ],
      "status": "pending"
    },
    {
      "id": "AR-39",
      "summary": "Audit the frontend codebase for any remaining thumb icon URL references and ensure they all resolve to the canonical public-root thumb paths (`/thumbs-up.png`, `/thumbs-down.png`) rather than `assets/generated/*` or any other location.",
      "reqIds": [
        "REQ-27"
      ],
      "status": "pending"
    },
    {
      "id": "AR-40",
      "summary": "Fix mobile PWA notification permission prompt not appearing when installed to home screen (works on desktop Chrome). Ensure fix does not change UI/design and avoids regressions (e.g., burger/menu icon, slide-out panel).",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-51",
      "summary": "Style consistency fix: on the “Did you keep your promise?” (reflection) screen, render the promise text using the same font style as the prior promise confirmation screen; make only this single style change to avoid regressions",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-52",
      "summary": "Retry the exact same build and deploy process with no code changes (same source state/commit) and attempt to deploy to the network again.",
      "reqIds": [
        "REQ-28"
      ],
      "status": "pending"
    }
  ],
  "architectural_notes": [
    "Implement as installable, local-first PWA (offline-capable storage for promises/reflections).",
    "State machine for Today screen: creation -> active -> rest mode; rest mode persists until 06:00 local time next day.",
    "Notifications scheduling: 08:30 always; 20:00 conditional on promise existing; notification tap deep-links to Today/promise screen.",
    "GA4 event instrumentation: promise_created, reflection_yes, reflection_no, history_viewed.",
    "Use user’s local timezone for day boundaries, 06:00 rest-mode reset, and notification scheduling.",
    "Enforce exactly one promise per day (except the temporary testing shortcut).",
    "Promise text is locked after creation; no editing before reflection.",
    "Rest Mode must persist across app close/reopen until 06:00 next day.",
    "If user does not reflect before 06:00, leave the day unreflected (do not auto-mark missed).",
    "Weekly summary is calendar week (Mon–Sun), not rolling 7 days."
  ],
  "known_issues": [
    "Intermittent issue where the app appears unstyled (raw HTML buttons) until a page reload; likely related to PWA/service worker cache or asset loading timing.",
    "Build/deploy intermittently fails during attempts to restore/swap thumb assets (app generation/build did not complete; retries requested).",
    "Repeated build/generation failures when attempting to restore new thumb assets, remove old/original thumb assets, and force a service-worker/cache refresh (retries failing).",
    "After successful build/deploy (v14), app still shows old/original thumbs; likely remaining old asset references and/or PWA/service-worker caching preventing new thumb icons from appearing.",
    "Despite recent retry attempts, the app is still showing the old/original thumb icons (asset swap not taking effect), indicating remaining references and/or PWA/service-worker caching preventing new icons from appearing.",
    "Old/original thumb icons still appear on Today and History screens even after hard refresh in draft panel (asset swap/caching issue persists).",
    "Thumb icon regression persists; user requests reverting to the previous known-good thumb asset setup instead of continuing with more complex caching-bypass approaches.",
    "Ongoing thumb icon asset replacement/caching issue: user is unsure whether the current generated thumbs under `frontend/public/assets/generated/thumbs-*.dim_128x128.png` are the ones they supplied; user will reupload their versions to ensure the correct thumbs are used.",
    "Broken thumb images now display as broken-image icons; indicates old thumb assets were deleted but the app is referencing incorrect/non-existent paths for the new uploaded thumb files (asset path mismatch).",
    "Thumb images are currently broken (broken-image icons) on both Today and History screens after deleting old thumbs and attempting to wire reuploaded ones; indicates incorrect/non-existent asset paths for the new uploaded thumb files."
  ],
  "isFixRequest": true,
  "generatedImages": [
    {
      "filename": "frontend/public/assets/generated/crescent-moon.dim_1200x800.png",
      "description": "Generated crescent moon background/asset",
      "targetWidth": 1200,
      "targetHeight": 800
    },
    {
      "filename": "frontend/public/assets/generated/full-sun.dim_1200x800.png",
      "description": "Generated full sun background/asset",
      "targetWidth": 1200,
      "targetHeight": 800
    },
    {
      "filename": "frontend/public/assets/generated/zen-stones.dim_1200x800.png",
      "description": "Generated zen stones background/asset",
      "targetWidth": 1200,
      "targetHeight": 800
    },
    {
      "filename": "frontend/public/assets/generated/journal-icon.dim_128x128.png",
      "description": "Generated journal icon",
      "targetWidth": 128,
      "targetHeight": 128
    },
    {
      "filename": "frontend/public/assets/generated/thumbs-up.dim_128x128.png",
      "description": "Generated thumbs up icon",
      "targetWidth": 128,
      "targetHeight": 128
    },
    {
      "filename": "frontend/public/assets/generated/thumbs-down.dim_128x128.png",
      "description": "Generated thumbs down icon",
      "targetWidth": 128,
      "targetHeight": 128
    },
    {
      "filename": "frontend/public/assets/generated/favicon.dim_64x64.png",
      "description": "Generated favicon",
      "targetWidth": 64,
      "targetHeight": 64
    }
  ],
  "projectName": "One Promise",
  "clarification_mode": "thinking",
  "clarification_rounds": 0
}